@if(Request.IsAuthenticated) {
    // Tame our user name a little bit...
    var display = Context.User.Identity.Name;
    if (display.Length >= 17)
    {
        display = display.Substring(0, 17);
    }
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">@display<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li>@Html.ActionLink("Change Password", "ChangePassword", "Account")</li>
            <li>@Html.ActionLink("Log Off", "LogOff", "Account")</li>
        </ul>
    </li>
}
else
{
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Guest<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li>@Html.ActionLink("Log On", "LogOn", "Account")</li>
            <li>@Html.ActionLink("Register", "Register", "Account")</li>
        </ul>
    </li>

}
